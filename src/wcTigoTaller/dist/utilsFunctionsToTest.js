var utils={},testToken=!0;utils.setTokenInLocalStorage1=function(e,t,a){var n=new Headers;n.append("Connection","keep-alive"),n.append("Content-Type","application/json"),n.append("Accept","application/json, text/plain, */*"),n.append("User-Agent","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36"),n.append("x-api-key","tJI0HIPiuC36hlUGcZoQW9m6GJTLhHOPkCjYxnBi"),n.append("Sec-Fetch-Site","cross-site"),n.append("Sec-Fetch-Mode","cors"),n.append("Sec-Fetch-Dest","empty"),n.append("X-Amz-Content-Sha256","beaead3198f7da1e70d03ab969765e0821b24fc913697e929e726aeaebf0eba3"),n.append("X-Amz-Date","20210923T202922Z"),n.append("Authorization","AWS4-HMAC-SHA256 Credential={{access_key}}/20210923/us-east-1/execute-api/aws4_request, SignedHeaders=accept;content-type;host;sec-fetch-dest;sec-fetch-mode;sec-fetch-site;x-amz-content-sha256;x-amz-date;x-api-key, Signature=108cc6a2722e57da48d6b0323352bb3e092fe7c00181f31824964fd20898ad50");var o=JSON.stringify({username:e,password:t,country:"co",deviceId:"123456",code:"444444",trace:{creationChannel:"oneapp",creationChannelType:"email"}});fetch("https://tigoid-api-qa.tigocloud.net/dar/v4/public/auth/login",{method:"POST",headers:n,body:o,redirect:"follow"}).then((e=>e.text())).then((e=>{var t=JSON.parse(e);!0===t.success&&null!=t.body&&!0===t.success&&(localStorage.setItem("IdToken",t.body.IdToken),null!=a&&null!=a&&a())})).catch((e=>{}))},utils.setTokenInLocalStorage=function(e,t,a){var n=new Headers;n.append("Connection","keep-alive"),n.append("Content-Type","application/json"),n.append("Accept","application/json, text/plain, */*"),n.append("Sec-Fetch-Site","cross-site"),n.append("Sec-Fetch-Mode","cors"),n.append("Sec-Fetch-Dest","empty"),n.append("Accept-Language","en-US,en;q=0.9,es;q=0.8"),n.append("x-api-key","jZXeAL6rex7NJEPTvuHen1hY6Ehkvwzz2i31shDR"),n.append("X-Amz-Content-Sha256","beaead3198f7da1e70d03ab969765e0821b24fc913697e929e726aeaebf0eba3"),n.append("X-Amz-Date","20210923T194030Z"),n.append("Authorization","AWS4-HMAC-SHA256 Credential=AKIAR5AURRDSVX4PKNX6/20210923/us-east-1/execute-api/aws4_request, SignedHeaders=accept;accept-language;connection;content-type;host;sec-fetch-dest;sec-fetch-mode;sec-fetch-site;x-amz-content-sha256;x-amz-date;x-api-key, Signature=7530efcdee40313c0db19bec78f01be85ea12dfd2aa96a776c2e5cf54e3943c7");var o={method:"POST",headers:n,body:JSON.stringify({username:e,password:t,country:"co",code:"444444",deviceId:"123456",trace:{creationChannel:"oneapp",creationChannelType:"email"}}),redirect:"follow"};testToken?(localStorage.setItem("IdToken","token"),a()):fetch("https://tigoid-api-qa.tigocloud.net/dar/v4/public/auth/login",o).then((e=>e.text())).then((e=>{var t=JSON.parse(e);null!=t&&null!=t&&null!=t.body&&null!=t.body&&(localStorage.setItem("IdToken",t.body.IdToken),null!=a&&null!=a&&a())})).catch((e=>{}))},utils.encodeQueryData=function(e){const t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},utils.getParams=function(e){var t={},a=document.createElement("a");a.href=e;for(var n=a.search.substring(1).split("&"),o=0;o<n.length;o++){var c=n[o].split("=");t[c[0]]=decodeURIComponent(c[1])}return t},utils.loadJSON=function(e){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","config.json",!0),t.onreadystatechange=function(){4==t.readyState&&"200"==t.status&&e(t.responseText)},t.send(null)},utils.loadSelector=function(e){for(var t=localStorage.getItem("wcAccountId"),a=!1,n=0;n<e.length;n++)e[n]==t&&(a=!0);0!=a&&null!=t||(t=e[0]),localStorage.setItem("wcAccountId",t);for(n=0;n<e.length;n++)e[n]==t?$("#accountSelector").append('<option selected value="'+e[n]+'">'+e[n]+"</option>"):$("#accountSelector").append('<option value="'+e[n]+'">'+e[n]+"</option>");$("#accountSelector").on("change",(function(){localStorage.setItem("wcAccountId",$(this).val()),window.location.href="/"}))},utils.init=function(){var e=dataJson.ids;null!=e&&null!=e?utils.loadSelector(e):utils.loadSelector([dataJson.id]);var t=".render-wc-index",a=utils.getParams(window.location.href);null!=a.tagHtml&&null!=a.tagHtml&&""!=a.tagHtml?(tagName=a.tagHtml,t=".render-wc",Object.assign(dataJson,a),document.querySelector(".render-wc-index").classList.add("d-none")):document.querySelector(".render-wc-index").classList.remove("d-none");var n=document.createElement(tagName);document.querySelector(t).append(n),n.addEventListener("eventCustom",(function(e){})),n.addEventListener("wcLoading",(function(e){var a=document.querySelector(t+" .div-loading");null!=a&&(e.detail.data.status?(a.classList.add("d-flex"),a.classList.remove("d-none")):(a.classList.remove("d-flex"),a.classList.add("d-none")))})),n.addEventListener("wcMessage",(function(e){var t=e.detail.data,a="alert-default";"error"==t.type&&(a="alert-danger"),"success"==t.type&&(a="alert-success"),"warning"==t.type&&(a="alert-warning"),"info"==t.type&&(a="alert-info");var n='<div class="alert '+a+' alert-dismissible div-alert" role="alert">\n<span class="alert-text">'+t.message+'</span>\n<button type="button" class="close" data-dismiss="alert" aria-label="Close">\n<span aria-hidden="true">&times;</span>\n</button>\n</div>\n';document.querySelector(".div-message").innerHTML=n+document.querySelector(".div-message").innerHTML})),n.addEventListener("wcSegment",(function(e){})),n.addEventListener("wcRedirect",(function(e){var t=e.detail.data;if("webcomponent"==t.redirectType){var a={tagHtml:t.data.tagHtml};for(var n in t.data.params)t.data.params.hasOwnProperty(n)&&(a[n]=t.data.params[n]);var o=t.url+"?";o+=utils.encodeQueryData(a),window.location.href=o}if("self"==t.redirectType){let e=t.url;if(t.data.hasOwnProperty("force_update")&&t.data.force_update){e+="?";let a={force_update:"true",tagHtml:t.data.tagHtml};e+=utils.encodeQueryData(a)}window.location.href=e}if("blank"==t.redirectType){let e=t.url;if(t.data.hasOwnProperty("force_update")&&t.data.force_update){e+="?";let a={force_update:"true",tagHtml:t.data.tagHtml};e+=utils.encodeQueryData(a)}window.open(e,"_blank")}t.redirectType})),n.addEventListener("wcRefreshToken",(function(e){utils.setTokenInLocalStorage(authData.user,authData.password,(function(){n.setAttribute("refresh-wc",(new Date).getTime())}))})),dataJson.id=localStorage.getItem("wcAccountId"),n.wcData=dataJson,document.querySelector(".btn-refresh").addEventListener("click",(function(e){n.setAttribute("refresh-wc",(new Date).getTime())})),document.querySelector(".btn-home").addEventListener("click",(function(e){window.location.href="/"})),document.querySelector(".btn-back").addEventListener("click",(function(e){window.history.back()}))};